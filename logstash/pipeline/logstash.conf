# logstash/pipeline/logstash.conf

input {
  beats {
    port => 5044
  }
}

filter {
  # The log message from Docker's json-file driver is nested
  # under the "message" key. This filter parses it as JSON.
  json {
    source => "message"
  }
}

output {
  elasticsearch {
    hosts => ["http://elasticsearch:9200"]
    # Create a new index for each day
    index => "agentic-sales-copilot-%{+YYYY.MM.dd}"
  }
}